{
  "packages": [
    "nodejs@20",
    "pnpm@latest",
    "python@3.11",
    "python311Packages.pip",
    "python311Packages.virtualenv",
    "docker",
    "docker-compose",
    "ollama",
    "ffmpeg",
    "portaudio",
    "pkg-config",
    "sox"
  ],
  "shell": {
    "init_hook": [
      "source $DEVBOX_PROJECT_ROOT/devbox.d/init_hook.sh"
    ],
    "scripts": {
      "setup": [
        "chmod +x setup.sh",
        "./setup.sh"
      ],
      "install-whisper": [
        "python -m venv .venv",
        "source .venv/bin/activate && pip install openai-whisper flask",
        "echo 'OpenAI Whisper and Flask installed in virtual environment!'",
        "echo 'To use: source .venv/bin/activate && whisper <audio_file>'"
      ],
      "start-whisper-service": [
        "source .venv/bin/activate && python whisper_service.py",
        "echo 'Whisper web service started on port 9000'"
      ],
      "activate-venv": [
        "source .venv/bin/activate && echo 'Virtual environment activated - Whisper is now available!'"
      ],
      "setup-ollama": [
        "echo 'Starting Ollama service...'",
        "ollama serve &",
        "sleep 5",
        "ollama pull llama3",
        "echo 'Ollama setup complete!'"
      ],
      "build": "pnpm run build",
      "dev": [
        "source .venv/bin/activate 2>/dev/null || echo 'Virtual env not found, continuing...'",
        "pnpm run dev"
      ],
      "start": [
        "source .venv/bin/activate 2>/dev/null || echo 'Virtual env not found, continuing...'", 
        "pnpm start"
      ],
      "test": "pnpm test",
      "install-deps": "pnpm install"
    }
  },
  "env": {
    "NODE_ENV": "development",
    "WHISPER_MODEL": "base",
    "OLLAMA_HOST": "http://localhost:11434",
    "TTS_ENGINE": "coqui",
    "AUDIO_SAMPLE_RATE": "16000",
    "AUDIO_CHANNELS": "1"
  }
}